module:
  - name: ztimer
    depends:
      - ?auto_init_ztimer
      - ztimer_core

  - name: ztimer_core
    uses:
      - pm_layered
      - ztimer_extend
      - ztimer_now64
    sources:
      - core.c
      - util.c
      - periodic.c

---
defaults:
  module:
    depends:
      - ztimer
      - ztimer_extend

module:
  - name: auto_init_ztimer
    depends:
      - ?auto_init

  - name: ztimer_now64
  - name: ztimer_extend

  - name: ztimer_usec
  - name: ztimer_msec
  - name: ztimer_sec

  - name: ztimer_auto_init
    uses:
      - auto_init_ztimer
      - pm_layered
      - ztimer_msec
      - ztimer_periph_rtc
      - ztimer_periph_rtt
      - ztimer_periph_timer
      - ztimer_sec
      - ztimer_usec

    sources:
      - auto_init.c

  - name: ztimer_convert
    sources:
      - convert.c

  - name: ztimer_convert_frac
    depends:
      - ztimer_convert
    sources:
      - convert_frac.c

  - name: ztimer_convert_muldiv64
    depends:
      - ztimer_convert
    sources:
      - convert_muldiv64.c

  - name: ztimer_convert_shift
    depends:
      - ztimer_convert
    sources:
      - convert_shift.c
 
  - name: ztimer_mock
    sources:
      - mock.c

  - name: overhead
    sources:
      - overhead.c

  - name: ztimer_periph_timer
    depends:
      - periph_timer
    sources:
      - periph_timer

  - name: ztimer_periph_rtt
    depends:
      - periph_rtt
    sources:
      - periph_rtt

  - name: ztimer_periph_rtc
    depends:
      - periph_rtc
    sources:
      - periph_rtc

  - name: ztimer_periph_ptp
    depends:
      - periph_ptp
    sources:
      - periph_ptp
