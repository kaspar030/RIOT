modules:
  - name: core_lib
    depends:
      - board
    selects:
      - core_lib_rmutex
      - core_lib_atomic_sync
    sources:
      - assert.c
      - atomic_c11.c
      - bitarithm.c
      - clist.c
      - priority_queue.c
      - ringbuffer.c
    env:
      global:
        includes:
          - ${relpath}/include

  - name: core_lib_rmutex
    sources:
      - rmutex.c
    depends:
      - core_lib
      - core

  - name: core_lib_atomic_sync
    sources:
      - atomic_sync.c
    depends:
      - board

  - name: core_init
    help: "Kernel initialization module"
    sources:
      - init.c
    depends:
      - ?auto_init
    uses:
      - core

  - name: core_panic
    sources:
      - panic.c
    uses:
      - core
      - ps
