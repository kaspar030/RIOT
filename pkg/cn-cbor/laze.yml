modules:
  - name: cn-cbor
    download:
      git: 
        url: https://github.com/cabo/cn-cbor
        commit: f1cf9ffdf5cfab935a45900556f9b68af925c256
    meta:
      license: MIT
    depends:
      - posix_headers
      - feature/arch_32bit
    sources:
      - src/cn-cbor.c
      - src/cn-create.c
      - src/cn-encoder.c
      - src/cn-error.c
      - src/cn-get.c
    env:
      local:
        CFLAGS:
          - -Wno-return-local-addr
        # Enable code forcing aligned reads
          - -DCBOR_ALIGN_READS
      export:
        includes:
          - ${srcdir}/include
        #enable context pointer
        CFLAGS:
          - -DUSE_CBOR_CONTEXT
