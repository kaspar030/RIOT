defaults:
    app:
        disable_modules:
            - auto_init
app:
    name: unittests
    depends:
        - tests-analog_util
        - tests-base64
        - tests-bcd
        - tests-bitfield
        - tests-bloom
        - tests-bluetil
        - tests-checksum
        - tests-clif
        - tests-color
        - tests-core
        - tests-credman
        - tests-div
        - tests-ecc
        - tests-fib
        - tests-fib_sr
        - tests-flashpage
        - tests-fmt
        - tests-frac
        - tests-gcoap
        - tests-gnrc_ipv6
        - tests-gnrc_ipv6_hdr
        - tests-gnrc_ipv6_nib
        - tests-gnrc_mac_internal
        - tests-gnrc_sixlowpan_frag_vrb
        - tests-gnrc_udp
        - tests-hashes
        - tests-ieee802154
        - tests-inet_csum
        - tests-ipv4_addr
        - tests-ipv6_addr
        - tests-ipv6_hdr
        - tests-luid
        - tests-matstat
        - tests-mtd
        - tests-nanocoap
        - tests-netopt
        - tests-netreg
        - tests-phydat
        - tests-pkt
        - tests-pktbuf
        - tests-pktqueue
        - tests-printf_float
        - tests-priority_pktqueue
        - tests-rtc
        - tests-saul_reg
        - tests-scanf_float
        - tests-seq
        - tests-sht1x
        - tests-sixlowpan_sfr

    blacklist:
        # insufficient memory
        - atmega_common

module:
    - name: unittests-base
      sources:
        - main.c
      depends:
          - board
          - embunit
          - test_utils_interactive_sync
      uses:
          - xtimer
      vars:
          CFLAGS:
            # individual unittests might use "test_suites_define" to set
            # "-DTEST_SUITES", but the unittest main.c needs to get the full
            # "-DTEST_SUITES=foo,bar,..."
            # As the former is inherited through "test_suites_define"'s export_vars,
            # undefine it here before ${test_suites} is expanded.
            - -UTEST_SUITES
            - ${testsuites}

      export_vars:
          CFLAGS:
              - -I${relpath}/common

    # some modules (e.g., gnrc_pktbuf) trigger conditional compiles
    # on "#if defined(TEST_SUITES)".
    # provide a module here that defines that. unittests depend on it.
    # modules that do use e.g., "#ifdef TEST_SUITES..." can "use:" this.
    # use "prefix:" so it is guaranteed to end up before "unittests-base" full
    # version ("-DTEST_SUITES=foo,bar,...".
    # (This way the individual tests don't get compiled with varying test
    # suite lists, in order to improve cacheability.)
    - name: test_suites_define
      export_vars:
          CFLAGS:
              - prefix:
                  - -DTEST_SUITES

subdirs:
    - tests-analog_util
    - tests-base64
    - tests-bcd
    - tests-bitfield
    - tests-bloom
    - tests-bluetil
    - tests-checksum
    - tests-clif
    - tests-color
    - tests-core
    - tests-credman
    - tests-div
    - tests-ecc
    - tests-fib
    - tests-fib_sr
    - tests-flashpage
    - tests-fmt
    - tests-frac
    - tests-gcoap
    - tests-gnrc_ipv6
    - tests-gnrc_ipv6_hdr
    - tests-gnrc_ipv6_nib
    - tests-gnrc_mac_internal
    - tests-gnrc_sixlowpan_frag_vrb
    - tests-gnrc_udp
    - tests-hashes
    - tests-ieee802154
    - tests-inet_csum
    - tests-ipv4_addr
    - tests-ipv6_addr
    - tests-ipv6_hdr
    - tests-luid
    - tests-matstat
    - tests-mtd
    - tests-nanocoap
    - tests-netopt
    - tests-netreg
    - tests-phydat
    - tests-pkt
    - tests-pktbuf
    - tests-pktqueue
    - tests-printf_float
    - tests-priority_pktqueue
    - tests-rtc
    - tests-saul_reg
    - tests-scanf_float
    - tests-seq
    - tests-sht1x
    - tests-sixlowpan
    - tests-sixlowpan_ctx
    - tests-sixlowpan_sfr
      #- tests-sock_util
      #- tests-timex
      #- tests-tsrb
      #- tests-uuid
      #- tests-vfs
