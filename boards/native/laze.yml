builder:
    name: native
    parent: cpu/native
    vars:
        CFLAGS:
            - remove:
              - -Os
        CFLAGS_ARCH:
            - -m32
        CFLAGS_DEFINES:
            - -DRIOT_MCU=\"native\"
            - -DBOARD_NATIVE
        includes:
          - ${relpath}/include
        libs:
          - -ldl
          - -lm

defaults:
  module:
    context: native

module:
  - name: board
    sources:
      - board_init.c
    depends:
        - native-drivers
        - cpu/native
        - core
        - periph_common
    uses:
        - mtd
        - motor_driver

  - name: feature/motor_driver
  - name: feature/cpp
    global_vars:
      LINK:
        - remove: gcc
        - g++

subdirs: drivers
