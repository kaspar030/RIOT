builder:
  - name: nrf52dk
    parent: nrf52832
    env:
      CFLAGS:
        - -I${relpath}/include
      PORT:
        - /dev/ttyACM0

    tools:
      flash:
        cmd:
          - openocd
              -c 'source [find interface/jlink.cfg]'
              -f boards/common/nrf52/dist/openocd.cfg
              -c 'tcl_port 0'
              -c 'telnet_port 0'
              -c 'gdb_port 0'
              -c 'init'
              -c 'targets'
              -c 'reset halt'
              -c 'flash write_image erase ${out}'
              -c 'verify_image ${out}'
              -c 'reset run'
              -c 'shutdown'
      term:
        cmd:
          - picocom --baud 115200 --quiet --imap lfcrlf ${PORT}

module:
  - name: board
    context: nrf52dk
    depends:
      - boards_common_nrf52xxxdk
      - nrf52832
      - periph_gpio

    export_vars:
      includes:
        - ${relpath}/include

