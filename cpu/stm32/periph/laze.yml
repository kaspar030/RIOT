defaults:
  module:
    context: stm32
    depends:
      - periph_common

module:
  - name: periph_flashpage
    sources:
      - flashpage.c
    env:
      export:
        CFLAGS:
          - -DSTM32_FLASHSIZE=${FLASHSIZE}

  - name: periph_hwrng
    sources:
      - hwrng.c

  - name: periph_pm
    sources:
      - pm.c

  - name: periph_rtc
    sources:
      - rtc.c

  - name: periph_rtt_lptim
    sources:
      - rtt_lptim.c

  - name: periph_timer
    sources:
      - timer.c

  - name: periph_pwm
    depends:
      - periph_gpio
    sources:
      - pwm.c

  - name: periph_spi
    depends:
      - periph_gpio
    sources:
      - spi.c

  - name: periph_uart
    depends:
      - periph_gpio
    sources:
      - uart.c

  - name: periph_adc
    context: stm32f4
    sources:
        - adc.c

  - name: periph_dac
    sources: [dac.c]
    depends: [ feature/periph_dac ]

  - name: periph_i2c
    context: stm32f4
    sources: [i2c_2.c]

  - name: periph_gpio
    sources: [gpio_all.c]
    uses:
      - periph_gpio_irq

  # - name: periph_gpio
  #   context: stm32f1
  #   sources: [gpio_f1.c]
  #   uses:
  #     - periph_gpio_irq

  - name: periph_gpio_irq
    depends:
      - periph_gpio

  - name: periph_cpuid

  - name: periph_qdec
    sources: [qdec.c]
    depends:
      - periph_gpio
      - feature/periph_qdec

  - name: periph_eeprom
    sources: [eeprom.c]
    depends: [ feature/periph_eeprom ]

