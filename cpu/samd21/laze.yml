contexts:
    - name: samd21
      parent: sam0
      env:
          CFLAGS_ARCH:
              - -mcpu=cortex-m0plus
              - -march=armv6s-m
              - -mfloat-abi=soft
          CFLAGS_DEFINES:
              - -DRIOT_MCU=\"samd21\"
              - -DCPU_CORE_CORTEX_M0PLUS
              - -DCPU_COMMON_SAMD21
          includes:
              - ${relpath}/include
          LINKFLAGS:
              - -Wl,--defsym=_rom_start_addr=0x00000000
              - -Wl,--defsym=_ram_start_addr=0x20000000
          ARM_MATH:
              - -DARM_MATH_CM0PLUS
              - -DARM_MATH_CM0_FAMILY
          EDBG_TARGET_TYPE: -t samd21

    - name: samr21g18a
      parent: samd21
      env:
          CFLAGS_DEFINES:
              - -DCPU_SAMR21
              - -D__SAMR21G18A__
              - -DCPU_MODEL_SAMR21G18A
              - -DCPU_FAM_SAMR21
          ROM_LEN: "0x40000"
          RAM_LEN: "0x8000"
          EDBG_TARGET_TYPE: -t samr21
          SLOT0_LEN: "0x1f800"
          SLOT0_OFFSET: "0x1000"
          SLOT1_LEN: "0x1f800"
          SLOT1_OFFSET: "133120"

    - name: samd21g18a
      parent: samd21
      env:
          CFLAGS_DEFINES:
              - -DCPU_SAMD21A
              - -D__SAMD21G18A__
              - -DCPU_MODEL_SAMD21G18A
          ROM_LEN: "0x40000"
          RAM_LEN: "0x8000"

    - name: samd21j18a
      parent: samd21
      env:
          CFLAGS_DEFINES:
              - -DCPU_SAMD21A
              - -D__SAMD21J18A__
              - -DCPU_MODEL_SAMD21J18A
          ROM_LEN: "0x40000"
          RAM_LEN: "0x8000"

modules:
  - name: feature/riotboot
    context: samr21g18a
  - name: cpu/samd21
    context: samd21
    sources:
        - cpu.c
        - vectors/vectors_samd2x.c

    selects:
      - pm_layered

    depends:
        - core
        - cortexm
        - periph_common

subdirs:
    - periph
