defaults:
  module:
    context: nrf5x

modules:
  - name: periph_i2c
    sources:
      - i2c_nrf52_nrf9160.c
  - name: periph_flashpage
    sources:
      - flashpage.c
  - name: periph_hwrng
    sources:
      - hwrng.c
  - name: periph_pm
    sources:
      - pm.c
  - name: periph_rtt
    sources:
      - rtt.c
  - name: periph_spi
    depends:
      - periph_gpio_irq
    uses:
      - periph_spi_gpio_mode
      - periph_spi_reconfigure
    sources:
      - spi_nrf52_nrf9160.c

  - name: periph_temperature
    sources:
      - temperature.c
  - name: periph_timer
    sources:
      - timer.c
  - name: periph_uart
    sources:
      - uart.c
  - name: periph_wdt
    sources:
      - wdt.c
  - name: periph_gpio
    sources:
      - gpio.c
    uses:
      - periph_gpio_irq
  - name: periph_gpio_irq
  - name: periph_wdt_cb
    context: nrf5x
  - name: periph_cpuid
    context: nrf5x

  - name: periph_pwm
    # Select the specific implementation for `periph_pwm`
    # nRF51 has its own PWM driver variant in its periph driver folder
    # TODO LAZE: this needs to be `[ nrf52, nrf53, nrf9160 ]`
    context: nrf52
    sources:
      - pwm_nrfxx.c

  - name: periph_usbdev
    provides_unique:
      - usbdev
    conflicts:
      # no USB peripheral on nrf52832
      - nrf52832
    sources:
      - usbdev.c
