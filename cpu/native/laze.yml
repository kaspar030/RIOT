context:
  - name: cpu/native
    parent: riot
    tasks:
        run:
            cmd:
             - "${out}"
        term:
            cmd:
             - "${out}"
        reset:
            cmd:
             - "true"

defaults:
    module:
        context: cpu/native

module:
    - name: cpu/native
      sources: [ async_read.c, irq_cpu.c, native_cpu.c, panic.c, startup.c, syscalls.c, tramp.S ]
      env:
        global:
          CFLAGS_DEFINES:
              - -DNATIVE_INCLUDES
              - -DCPU_NATIVE
          includes:
              - ${relpath}/include
      depends:
          - core
          - periph_uart
          - stdio_native
      selects:
          - core_idle_thread
      uses:
          - can_linux
          - mtd_native
          - netdev_tap
          - periph_spidev_linux
          - socket_zep
          - xtimer

    - name: printf_float
    - name: scanf_float
    - name: feature/stack_protector
    - name: feature/arch_32bit

    - name: netdev_default
      depends:
          - netdev_tap

subdirs:
    - can
    - periph
    - mtd
    - netdev_tap
    - stdio_native
    - trace
    - vfs
