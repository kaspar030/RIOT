context:
    name: cpu/native
    parent: riot
    tools:
        run:
            cmd:
             - "${out}"
        term:
            cmd:
             - "${out}"

defaults:
    module:
        context: cpu/native

module:
    - name: cpu/native
      sources: [ async_read.c,  irq_cpu.c,  native_cpu.c,  panic.c,  startup.c,  syscalls.c, tramp.S ]
      global_vars:
          CFLAGS:
              - -DNATIVE_INCLUDES
              - -DCPU_NATIVE
              - -I${relpath}/include
      depends:
          - core
          - periph_uart
          - stdio_native
      uses:
          - can_linux
          - mtd_native
          - netdev_tap
          - netdev_tap
          - periph_spidev_linux
          - socket_zep
          - xtimer

    - name: printf_float
    - name: scanf_float
    - name: feature/stack_protector
    - name: feature/arch_32bit

    - name: netdev_default
      depends:
          - netdev_tap

subdirs:
    - can
    - periph
    - mtd
    - netdev_tap
    - stdio_native
    - trace
    - vfs
